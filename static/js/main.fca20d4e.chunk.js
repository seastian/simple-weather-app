(this["webpackJsonpsimple-weather-app"]=this["webpackJsonpsimple-weather-app"]||[]).push([[0],{93:function(t,e,n){"use strict";n.r(e);var c=n(5),r=n(0),a=n.n(r),i=n(10),o=n.n(i),u=n(120),s=n(122),d=n(123),j=n(44),l=n(124),b=n(125),p=n(64),f=n.n(p),O=n(16),h=function(t){return function(t){return t.ui}(t).requests>0},y="INIT_APP",x="MULTI",v="API_START",m="API_END",E="ADD_CITY",g="FETCH_CURRENT_WEATHER",C="FETCH_CURRENT_WEATHER_SUCCESS",T="SET_CURRENT_WEATHER",_="DELETE_CITY",I="UPDATE_ALL_WEATHER",R=function(t,e,n){return{type:E,city:{id:"".concat(e,",").concat(n),name:t,lat:e,lng:n}}},N=function(t){return{type:g,cityId:t}},A=Object(u.a)((function(){return{root:{flexGrow:1},title:{flexGrow:1}}})),S={updateAllWeather:function(){return{type:I}}},w=Object(O.b)((function(t){return{isLoading:h(t)}}),S)((function(t){var e=t.isLoading,n=t.updateAllWeather,r=A();return Object(c.jsx)("div",{className:r.root,children:Object(c.jsx)(s.a,{position:"static",children:Object(c.jsxs)(d.a,{children:[Object(c.jsx)(j.a,{variant:"h6",className:r.title,children:"Weather"}),e?Object(c.jsx)(l.a,{color:"secondary"}):Object(c.jsx)(b.a,{color:"inherit",onClick:n,children:Object(c.jsx)(f.a,{})})]})})})})),W=n(14),U=n(15),H=n(126),L=n(127),P=n(141),k=n(128),D=n(65),q=n.n(D),F=Object(u.a)((function(t){return{appBar:{position:"relative"},title:{marginLeft:t.spacing(2),flex:1}}})),B=a.a.forwardRef((function(t,e){return Object(c.jsx)(H.a,Object(U.a)({direction:"up",ref:e},t))})),G=function(t){var e=t.title,n=t.open,r=t.onClose,a=t.children,i=F(),o=Object(L.a)("(max-width: 769px)");return Object(c.jsxs)(P.a,{open:n,fullScreen:o,fullWidth:!0,onClose:r,TransitionComponent:B,children:[Object(c.jsx)(s.a,{className:i.appBar,children:Object(c.jsxs)(d.a,{children:[Object(c.jsx)(b.a,{edge:"start",color:"inherit",onClick:r,"aria-label":"close",children:Object(c.jsx)(q.a,{})}),Object(c.jsx)(j.a,{variant:"h6",className:i.title,children:e})]})}),Object(c.jsx)(k.a,{children:a})]})},J=n(138),M=n(130),X=n(129),Y=n(131),z=n(66),V=n.n(z),K=Object(u.a)((function(){return{root:{height:"60vh"}}})),Q={addCity:R},Z=Object(O.b)(void 0,Q)((function(t){var e=t.addCity,n=K(),a=Object(r.useState)(""),i=Object(W.a)(a,2),o=i[0],u=i[1],s=Object(r.useState)([]),d=Object(W.a)(s,2),j=d[0],l=d[1];Object(r.useEffect)((function(){fetch("cities.json").then((function(t){return t.json()})).then((function(t){return t.map((function(t,e){return{id:e,name:t[0],country:t[1],lat:t[2],lng:t[3]}}))})).then(l)}),[]);var b=j.filter((function(t){return t.name.toUpperCase().includes(o.toUpperCase())})).slice(0,25),p=0===b.length?"Not found":b.length<25?"":"...";return Object(c.jsxs)("div",{className:n.root,children:[Object(c.jsx)(J.a,{value:o,onChange:function(t){u(t.target.value)},fullWidth:!0,autoFocus:!0,margin:"normal",InputProps:{startAdornment:Object(c.jsx)(M.a,{position:"start",children:Object(c.jsx)(V.a,{})})}}),Object(c.jsxs)(X.a,{children:[b.map((function(t){return Object(c.jsx)(Y.a,{onClick:(n=t.id,function(){var t=j[n];e(t.name,t.lat,t.lng)}),button:!0,children:"".concat(t.name,", ").concat(t.country)},t.id);var n})),Object(c.jsx)(Y.a,{children:p})]})]})})),$=n(132),tt=n(67),et=n.n(tt),nt=Object(u.a)((function(t){return{button:{position:"absolute",right:t.spacing(3),bottom:t.spacing(3)}}})),ct=function(){var t=nt(),e=Object(r.useState)(!1),n=Object(W.a)(e,2),a=n[0],i=n[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)($.a,{onClick:function(){i(!0)},color:"primary","aria-label":"add",className:t.button,children:Object(c.jsx)(et.a,{})}),Object(c.jsx)(G,{title:"Choose city",open:a,onClose:function(){i(!1)},children:Object(c.jsx)(Z,{})})]})},rt=n(139),at=n(136),it=function(t){return t.cities},ot=function(t){return Object.keys(it(t))},ut=function(t,e){return it(t)[e]},st=n(133),dt=n(134),jt=n(135),lt=n(68),bt=n.n(lt),pt=Object(u.a)((function(t){return{current:{textAlign:"center",fontSize:"2em",marginBottom:t.spacing(1)}}})),ft={deleteCity:function(t){return{type:_,cityId:t}}},Ot=Object(O.b)((function(t,e){var n=e.id;return{city:ut(t,n)}}),ft)((function(t){var e,n,r=t.city,a=t.deleteCity,i=pt();return Object(c.jsxs)(st.a,{children:[Object(c.jsx)(dt.a,{title:r.name,action:Object(c.jsx)(b.a,{"aria-label":"delete-city",onClick:function(){return a(r.id)},children:Object(c.jsx)(bt.a,{})})}),Object(c.jsx)(jt.a,{children:r.currentWeather?Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:i.current,children:null===(e=r.currentWeather)||void 0===e?void 0:e.temperature}),Object(c.jsx)(at.a,{container:!0,spacing:2,justify:"center",children:null===(n=r.forecast)||void 0===n?void 0:n.slice(1,6).map((function(t,e){return Object(c.jsxs)(at.a,{item:!0,children:[Object(c.jsx)("div",{children:"Today"}),Object(c.jsx)("div",{children:t.temperature})]})}))})]}):"Loading"})]})})),ht=Object(O.b)((function(t){return{citiesIds:ot(t)}}))((function(t){var e=t.citiesIds;return Object(c.jsx)(rt.a,{m:4,children:Object(c.jsx)(at.a,{container:!0,spacing:2,children:e.map((function(t){return Object(c.jsx)(at.a,{item:!0,xs:12,md:4,children:Object(c.jsx)(Ot,{id:t})},t)}))})})}));var yt={initApp:function(){return{type:y}}},xt=Object(O.b)(void 0,yt)((function(t){var e=t.initApp;return Object(r.useEffect)((function(){e()}),[e]),Object(c.jsxs)("div",{children:[Object(c.jsx)(w,{}),Object(c.jsx)(ht,{}),Object(c.jsx)(ct,{})]})})),vt=(n(92),n(137)),mt=n(17),Et=n(25),gt=n(11),Ct={},Tt={requests:0},_t=Object(Et.c)({cities:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case E:var n=e.city;return Object(U.a)(Object(U.a)({},t),{},Object(gt.a)({},n.id,n));case T:var c=e.payload,r=c.cityId,a=c.weather,i=c.forecast;return Object(U.a)(Object(U.a)({},t),{},Object(gt.a)({},r,Object(U.a)(Object(U.a)({},t[r]),{},{currentWeather:a,forecast:i})));case _:var o=e.cityId,u=Object(U.a)({},t);return delete u[o],u;default:return t}},ui:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v:return Object(U.a)(Object(U.a)({},t),{},{requests:t.requests+1});case m:return Object(U.a)(Object(U.a)({},t),{},{requests:t.requests-1});default:return t}}}),It=function(t,e,n,c){return{type:v,payload:{url:t,method:"GET",pending:e,success:n,error:c}}},Rt=[function(t){var e=t.dispatch;return function(t){return function(n){t(n),n.type===x&&n.actions.forEach((function(t){return e(t)}))}}},function(t){var e=t.dispatch;return function(t){return function(n){if(t(n),n.type===v){var c=n.payload,r=c.method,a=c.pending,i=c.success,o=c.error,u=c.data,s=c.url,d=n.payload,j={method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(u)||void 0};e(a),fetch(encodeURI("https://api.openweathermap.org/data/2.5"+s+"&appid=5d2145b1e3153ce2a87bbad571a98ba4"),j).then((function(t){return t.json()})).then((function(t){d.success.payload.data=t,e(i)})).catch((function(t){o.payload.data=t,e(o)})).then((function(){return e({type:m})}))}}}},function(t){var e=t.dispatch;return function(t){return function(n){t(n),n.type===y&&navigator.geolocation.getCurrentPosition((function(t){var n=t.coords,c=n.latitude,r=n.longitude;e(R("Current",c,r))}))}}},function(t){var e=t.dispatch,n=t.getState;return function(t){return function(c){if(t(c),c.type===E&&e(N(c.city.id)),c.type===g){var r=c.cityId,a={type:"FETCH_CURRENT_WEATHER_PENDING",id:r},i=function(t){return{type:C,cityId:t,payload:{data:void 0}}}(r),o=function(t){return{type:"FETCH_CURRENT_WEATHER_ERROR",cityId:t,payload:{data:void 0}}}(r),u=r.split(","),s=Object(W.a)(u,2),d=s[0],j=s[1];e(It("/onecall?lat=".concat(d,"&lon=").concat(j,"&exclude=minutely,hourly,alerts"),a,i,o))}if(c.type===C){var l=c.cityId,b=c.payload.data,p={temperature:b.current.temp},f=b.daily.map((function(t){return{temperature:t.temp.day}}));ut(n(),l)&&e(function(t,e,n){return{type:T,payload:{cityId:t,weather:e,forecast:n}}}(l,p,f))}}}},function(t){var e=t.dispatch,n=t.getState;return function(t){return function(c){var r;t(c),c.type===I&&e((r=ot(n()).map((function(t){return N(t)})),{type:x,actions:r}))}}}],Nt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Et.d,At=Object(Et.e)(_t,Nt(Et.a.apply(void 0,Object(mt.a)(Rt))));o.a.render(Object(c.jsxs)(a.a.StrictMode,{children:[Object(c.jsx)(vt.a,{}),Object(c.jsx)(O.a,{store:At,children:Object(c.jsx)(xt,{})})]}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.fca20d4e.chunk.js.map